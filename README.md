# **COGS 106 - Simulate and Recover**
## **Overview**
This project aimed to write a working simulate-and-recover program that would successfully implement the EZ diffusion model. The EZ diffusion model is a simplified version of the drift diffusion model. This allows us to calculate the estimated parameters using the observed summary statistics. This is done using two types of equations: foward and inverse equations. We can simulate the recovery of the EZ diffusion model by first using the forward equations to generate "predicted" summary statistics. Then, we can use the inverse equations to simulate ‘observed’ summary statistics. Finally, we can use sampling distribution equations to compute the "estimated" parameters. Finally, we can compute the estimation bias, and if the recovery and simulation are successful then the b value will be close to 0 and b^2 should increase N. Additionally, the b value should be 0 when (R^obs, M^obs, V^obs) = (R^pred, M^pred, V^pred). Essentially, the estimation procedure can only recover the data accurately if it was truly generated by the EZ diffusion model.

## **Results from testsuite.py**
### **Running: test_bias_averages_to_zero**

    Testing if parameter recovery bias averages to zero...
    Iteration 0/100
    Iteration 20/100
    Iteration 40/100
    Iteration 60/100
    Iteration 80/100
    Mean bias for v: -0.010296 ± 0.006276
    Mean bias for a: 0.000586 ± 0.002389
    Mean bias for T: -0.001095 ± 0.001075

    ✓ All parameter biases are not significantly different from zero


### **Running: test_bias_decreases_with_n**
    Running simulations for N = 10
    Iteration 0/10
    /workspace/simulate-and-recover/simulate-and-recover/src/ez_diffusion.py:84: RuntimeWarning: invalid value encountered in scalar divide
    aest = L / vest
    Running simulations for N = 100
    Iteration 0/10
    Running simulations for N = 1000
    Iteration 0/10
    Simulation completed in 0.00 seconds
    MSE for v: N=10: 0.594725, N=1000: 0.004179
    MSE for a: N=10: nan, N=1000: 0.000466
    MSE for T: N=10: nan, N=1000: 0.000124

    ✓ MSE for v decreases as sample size increases

## **Conclusions**
Based on the test results, we can conclude that this program was successful in running a working EZ diffusion, through the implementation of forward, inverse, and sampling equations. This is because the simulation was able to pass all the tests in the test suite. We were also able to confirm that it passed the requirement that the averaged bias should be equal to 0, and the squared error decreased as the sample size increased. 

## **Acknowledgements**
Used information and equations from "Diffusion models made EZ" slides by Joachim Vandekerckhove, Winter 2025

The code for ez.diffusion.py, simulate.py, testsuite.py, and the bash scripts were written using ZotGPT (model Claude Sonnet 3.7). 